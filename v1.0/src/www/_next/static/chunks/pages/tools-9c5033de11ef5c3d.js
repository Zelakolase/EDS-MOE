(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{6475:function(e,t,n){"use strict";n.d(t,{O:function(){return l}});var r=n(9499),o=n(2640);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=n(7294),a=(c.useContext,c.useState);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=a(e),n=(0,o.Z)(t,2),i=n[0],c=n[1];function l(e,t){var n=e.split(".").map((function(e){return e.trim()}));return function(e){c(s(s({},i),{},(0,r.Z)({},n[0],s(s({},i[n[0]]),{},(0,r.Z)({},n[1],e)))))}(t)}function u(){c(e)}return[i,l,u]}},6221:function(e,t,n){"use strict";n.r(t);var r=n(29),o=n(9499),i=n(2640),s=n(7794),c=n.n(s),a=n(480),l=n(7294),u=n(313),d=n(6475),f=n(150),p=n(8790),h=n(5419),v=n(5193),x=n(8609),b=n(4612),j=n(7398),m=n(7375),g=n(6886),w=n(2821),y=n(5434),C=n(3854),O=n(1163),k=n(5893);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,l.createContext)();function z(e){var t=e.tools,n=void 0===t?[]:t,r=e.setCurrentTool,o=e.currentTool,i=void 0===o?0:o,s=(0,u.Fg)(),c=s.bg,a=s.color,l=s.bgHover;return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(h.v2,{children:[(0,k.jsx)(h.j2,{alignItems:"center",bgColor:c,size:"lg",color:a,_hover:{bgColor:l},_expanded:{bgColor:l},_focus:{boxShadow:"outline"},as:v.zx,rightIcon:(0,k.jsx)(w.Duv,{size:"1.4em"}),children:n[i]?n[i].label:"Tools"}),(0,k.jsx)(h.qy,{children:n.map((function(e,t){return(0,k.jsx)(h.sN,{onClick:function(){return r(t)},children:e.label},t)}))})]})})}function P(){var e=(0,x.pm)(),t=(0,l.useState)(!1),n=t[0],o=t[1],i=(0,l.useContext)(_),s=i.downloadDocument,u=i.stateSetter,d=i.btnRef,f=s.publicCode;function h(){return j.apply(this,arguments)}function j(){return(j=(0,r.Z)(c().mark((function t(){var n,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o(!0),t.prev=1,t.next=4,(0,a.W)("post","dac")({public_code:f},null,{responseType:"blob"});case 4:if("failed"!==(null===(n=t.sent)||void 0===n?void 0:n.data.status)){t.next=7;break}throw n.data.msg;case 7:if("error"!==(null===n||void 0===n?void 0:n.data)){t.next=9;break}throw"Something wrong, Please contact with support to solve this problem.";case 9:(r=document.createElement("a")).target="_blank",r.download="".concat(f,".").concat(n.headers["content-type"]),r.href=URL.createObjectURL(n.data),document.body.appendChild(r),r.click(),r.parentNode.removeChild(r),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(1),e({title:"Search failed.",description:t.t0.toString(),status:"error",position:"top",duration:9e3,isClosable:!0});case 21:o(!1);case 22:case"end":return t.stop()}}),t,null,[[1,18]])})))).apply(this,arguments)}return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(p.Kq,{w:"full",spacing:5,align:"center",children:[(0,k.jsxs)(p.Kq,{children:[(0,k.jsx)(p.X6,{size:"xs",children:"Public Code"}),(0,k.jsx)(b.II,{value:f,onChange:function(e){return u("downloadDocument.publicCode",e.target.value)},size:"md",variant:"filled",placeholder:"Code"})]}),(0,k.jsx)(v.zx,{ref:d,isDisabled:!f,isLoading:n,onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:case"end":return e.stop()}}),e)}))),maxW:"min-content",rightIcon:(0,k.jsx)(w.RFS,{size:"1.4em"}),children:"Download"})]})})}function I(){var e,t=(0,x.pm)(),n=(0,l.useState)(!1),i=n[0],s=n[1],u=(0,l.useState)(),d=(u[0],u[1]),h=(0,l.useContext)(_),m=h.verifyDocument,g=h.stateSetter,w=h.btnRef,O=m.verifyCode,S=m.file;function D(){return z.apply(this,arguments)}function z(){return(z=(0,r.Z)(c().mark((function e(){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,S.arrayBuffer();case 4:return n=e.sent,e.next=7,(0,a.W)("post","vad")(new Uint8Array(n),{"Content-Type":"application/pdf",verify_code:O});case 7:if("failed"!==(null===(r=e.sent)||void 0===r?void 0:r.data.status)){e.next=10;break}throw r.data.msg;case 10:if("error"!==(null===r||void 0===r?void 0:r.data)){e.next=12;break}throw"Something wrong, Please try again or contact with support to solve this problem.";case 12:d(r.data),t({title:"Result.",description:r.data.msg,status:"info",position:"top",duration:9e3,isClosable:!0}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t({title:"Verify failed.",description:e.t0.toString(),status:"error",position:"top",duration:9e3,isClosable:!0});case 19:s(!1);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}return(0,k.jsxs)(p.Kq,{w:"full",spacing:8,align:"center",children:[(0,k.jsxs)(p.Kq,{children:[(0,k.jsx)(p.X6,{size:"xs",children:"Verification Code"}),(0,k.jsx)(b.II,{size:"md",variant:"filled",placeholder:"Code",value:O,onChange:function(e){g("verifyDocument.verifyCode",e.target.value)}}),(0,k.jsxs)(p.Ug,{justify:"end",children:[S&&(0,k.jsx)(f.UL,{file:S}),(0,k.jsx)(j.u,{hasArrow:!0,placement:"top",label:"Import the document which you need to verify",children:(0,k.jsxs)(p.xu,{position:"relative",w:"max-content",children:[(0,k.jsx)(v.zx,{size:"sm",rightIcon:(0,k.jsx)(C.ys2,{size:"1.4em"}),children:"Import File"}),(0,k.jsx)(b.II,(e={w:"full",type:"file",accept:".pdf",left:0,onChange:function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"undefined"!==typeof(n=t.target.files[0])&&g("verifyDocument.file",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),top:0,cursor:"pointer",position:"absolute",opacity:0},(0,o.Z)(e,"w","full"),(0,o.Z)(e,"h","full"),e))]})})]})]}),(0,k.jsx)(v.zx,{ref:w,onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:case"end":return e.stop()}}),e)}))),isDisabled:!S||!O,isLoading:i,maxW:"min-content",rightIcon:(0,k.jsx)(y.Ac1,{size:"1.4em"}),children:"Verify"})]})}function Z(){var e,t,n,o,i=(0,x.pm)(),s=(0,O.useRouter)(),u=(0,l.useState)({}),d=u[0],h=u[1],j=(0,l.useState)(!1),y=j[0],C=j[1],S=(0,m.qY)(),z=S.onOpen,P=S.onClose,I=(0,l.useContext)(_),Z=I.searchDocument,q=I.stateSetter,E=I.btnRef,K=Z.publicCode;function N(){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.next=4,(0,a.W)("post","sfad")({public_code:K});case 4:if("failed"!==(null===(r=e.sent)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.status)){e.next=7;break}throw null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.msg;case 7:h(null===r||void 0===r?void 0:r.data),z(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),i({title:"Search failed.",description:e.t0.toString(),status:"error",position:"top",duration:9e3,isClosable:!0});case 14:C(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(p.Kq,{w:"full",spacing:5,align:"center",children:[(0,k.jsxs)(p.Kq,{children:[(0,k.jsx)(p.X6,{size:"xs",children:"Public Code"}),(0,k.jsx)(b.II,{value:K,onChange:function(e){return q("searchDocument.publicCode",e.target.value)},size:"md",variant:"filled",placeholder:"Code"})]}),(0,k.jsx)(v.zx,{ref:E,isDisabled:!K,isLoading:y,onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:case"end":return e.stop()}}),e)}))),maxW:"min-content",rightIcon:(0,k.jsx)(w.RB5,{size:"1.4em"}),children:"Search"})]}),(0,k.jsx)(f.u_,D(D({},S),{},{header:"Search result ",footer:(0,k.jsx)(v.zx,{onClick:P,children:"Close"}),children:(0,k.jsxs)(p.Kq,{children:[["document_name","verifier","writer","date_of_publication"].filter((function(e){return!d.hasOwnProperty(e)})).length>0&&(0,k.jsxs)(g.bZ,{status:"error",children:[(0,k.jsx)(g.zM,{}),(0,k.jsxs)("div",{children:["Some data isn't found, Please"," ",(0,k.jsx)("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){return s.push("/support")},children:"contact us"})," ","to solve this problem."]})]}),(0,k.jsx)(p.iz,{}),(0,k.jsxs)(p.Kq,{spacing:2,children:[(0,k.jsxs)(p.Kq,{spacing:0,children:[(0,k.jsx)(p.X6,{fontSize:12,children:"Document name"}),(0,k.jsx)(p.xv,{children:null!==(e=null===d||void 0===d?void 0:d.document_name)&&void 0!==e?e:"Not found"})]}),(0,k.jsxs)(p.Kq,{spacing:0,children:[(0,k.jsx)(p.X6,{fontSize:12,children:"Verifier"}),(0,k.jsx)(p.xv,{children:null!==(t=null===d||void 0===d?void 0:d.verifier)&&void 0!==t?t:"Not found"})]}),(0,k.jsxs)(p.Kq,{spacing:0,children:[(0,k.jsx)(p.X6,{fontSize:12,children:"Writer"}),(0,k.jsx)(p.xv,{children:null!==(n=null===d||void 0===d?void 0:d.writer)&&void 0!==n?n:"Not found"})]}),(0,k.jsxs)(p.Kq,{spacing:0,children:[(0,k.jsx)(p.X6,{fontSize:12,children:"Date of publication"}),(0,k.jsx)(p.xv,{children:null!==(o=null===d||void 0===d?void 0:d.date_of_publication)&&void 0!==o?o:"Not found"})]})]})]})}))]})}t.default=function(){var e,t=(0,d.O)({downloadDocument:{publicCode:""},verifyDocument:{file:null,verifyCode:""},searchDocument:{publicCode:""}}),n=(0,i.Z)(t,2),r=n[0],o=n[1],s=[{label:"Download a document",component:(0,k.jsx)(P,{})},{label:"Verify a document",component:(0,k.jsx)(I,{})},{label:"Search for a document",component:(0,k.jsx)(Z,{})}],c=(0,l.useState)(0),a=c[0],f=c[1],h=(0,l.useRef)(null),v=(0,u.Fg)();return v.bg,v.color,v.bgHover,(0,l.useEffect)((function(){var e=function(e){if("Enter"===e.key)h.current.click()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[]),(0,k.jsx)(_.Provider,{value:D(D({},r),{},{stateSetter:o,btnRef:h}),children:(0,k.jsxs)(p.Kq,{align:"center",spacing:10,justify:"center",h:"full",children:[(0,k.jsx)(z,{tools:s,currentTool:a,setCurrentTool:f}),s[a]&&(null===(e=s[a])||void 0===e?void 0:e.component)]})})}},4565:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tools",function(){return n(6221)}])}},function(e){e.O(0,[612,980,774,888,179],(function(){return t=4565,e(e.s=t);var t}));var t=e.O();_N_E=t}]);